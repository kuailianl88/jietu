(window.webpackJsonp=window.webpackJsonp||[]).push([[157],{28:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageModelFactory=void 0;var r=o(3),s=o(340),n=o(341);t.PageModelFactory=class{static make(e,t){return(0,r.action)((()=>{const o=new s.PageModel(t);return e.version&&(o.version=n.PageVersionModelFactory.make(e.version,o)),this.remake(o,e)}))()}static makeAsync(e,t){return(0,r.action)((async()=>{const o=new s.PageModel(t);return this.remakeBase(o,e),o.version=await n.PageVersionModelFactory.makeAsync(e.version,o),o}))()}static remakeBase(e,t){return(0,r.action)((()=>(e._id=t._id,e.slug=t.slug,e.siteId=t.siteId,e.folderId=t.folderId,e.uuid=t.uuid,e.screenshotVersion=t.screenshotVersion,e.shareImageVersion=t.shareImageVersion,e.privateVersionId=t.privateVersionId,e.publicVersionId=t.publicVersionId,e.createdAt=t.createdAt,e.updatedAt=t.updatedAt,e.updatedBy=t.updatedBy,e.deletedAt=t.deletedAt,e.templateConfig=t.templateConfig,e)))()}static remake(e,t){return(0,r.action)((()=>(this.remakeBase(e,t),e.version=n.PageVersionModelFactory.make(t.version,e),e)))()}}},32:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomCodeAttributes=void 0;t.CustomCodeAttributes=function(e){return e.HeadCode="dta-custom-code-head",e.BodyStyles="data-custom-styles-body",e.BodyCode="data-custom-code-body",e.BodyScripts="data-custom-scripts-body",e}({})},340:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageModel=void 0;var r=o(3);t.PageModel=class{constructor(e){this.$siteModel=e,this._id=void 0,this.slug=void 0,this.siteId=void 0,this.title=void 0,this.folderId=void 0,this.uuid=void 0,this.version=void 0,this.screenshotVersion=void 0,this.shareImageVersion=void 0,this.privateVersionId=void 0,this.publicVersionId=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.updatedBy=void 0,this.deletedAt=void 0,this.templateConfig=void 0,(0,r.makeAutoObservable)(this)}get pagePath(){return{pageId:this._id,siteId:this.$siteModel._id}}get url(){return this.$siteModel.url+this.slug}}},341:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageVersionModelFactory=void 0;var r=o(3),s=o(49),n=o(342),i=o(357),a=o(359),d=o(361),c=o(363);t.PageVersionModelFactory=class{static make(e,t){return(0,r.action)((()=>{const o=new c.PageVersionModel(t);o._id=e._id,o.title=e.title,o.seoTitle=e.seoTitle,o.seoDescription=e.seoDescription,o.seoKeywords=e.seoKeywords,o.seoImage=e.seoImage,o.createdAt=e.createdAt,o.updatedAt=e.updatedAt,o.deletedAt=e.deletedAt,o.codeHead=e.codeHead,o.codeBody=e.codeBody,o.styles=e.styles,o.noindex=e.noindex,o.conversion=e.conversion;for(const r of e.sections){const e=d.SectionOrganismModelFactory.make(r,t.siteId,t._id);o.sectionMap.set(e._id,e)}for(const r of e.modals){const e=a.ModalOrganismModelFactory.make(r,t.siteId,t._id);o.modalMap.set(e._id,e)}for(const t of e.globalOrganisms||[]){const e=n.GlobalOrganismModelFactory.make(t);o.globalOrganismMap.set(e._id,e)}for(const t of e.megaMenus||[]){const e=i.MegamenuOrganismModelFactory.make(t);o.megamenuMap.set(e._id,e)}for(const t of e.forms||[])o.formMap.set(t._id,t);return o}))()}static makeAsync(e,t){return(0,r.action)((async()=>{const o=new c.PageVersionModel(t);o._id=e._id,o.title=e.title,o.seoTitle=e.seoTitle,o.seoDescription=e.seoDescription,o.seoKeywords=e.seoKeywords,o.seoImage=e.seoImage,o.createdAt=e.createdAt,o.updatedAt=e.updatedAt,o.deletedAt=e.deletedAt,o.codeHead=e.codeHead,o.codeBody=e.codeBody,o.styles=e.styles,o.noindex=e.noindex,o.conversion=e.conversion;for(const r of e.sections){const e=d.SectionOrganismModelFactory.make(r,t.siteId,t._id);o.sectionMap.set(e._id,e),await(0,s.yieldToMain)()}for(const r of e.modals){const e=a.ModalOrganismModelFactory.make(r,t.siteId,t._id);o.modalMap.set(e._id,e)}await(0,s.yieldToMain)();for(const t of e.globalOrganisms||[]){const e=n.GlobalOrganismModelFactory.make(t);o.globalOrganismMap.set(e._id,e)}await(0,s.yieldToMain)();for(const t of e.megaMenus||[]){const e=i.MegamenuOrganismModelFactory.make(t);o.megamenuMap.set(e._id,e)}await(0,s.yieldToMain)();for(const t of e.forms||[])o.formMap.set(t._id,t);return o}))()}}},363:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageVersionModel=void 0;var r=o(3);t.PageVersionModel=class{constructor(e){this.$pageModel=e,this._id=void 0,this.title=void 0,this.seoTitle=void 0,this.seoDescription=void 0,this.seoKeywords=void 0,this.seoImage=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.deletedAt=void 0,this.codeHead=void 0,this.codeBody=void 0,this.styles=void 0,this.noindex=void 0,this.conversion=void 0,this.sectionMap=new Map,this.modalMap=new Map,this.globalOrganismMap=new Map,this.megamenuMap=new Map,this.formMap=new Map,(0,r.makeAutoObservable)(this)}get modals(){return Array.from(this.modalMap.values())}get sections(){return Array.from(this.sectionMap.values()).sort(((e,t)=>e.position-t.position))}get globalOrganisms(){return Array.from(this.globalOrganismMap.values())}get forms(){return Array.from(this.formMap.values())}get megaMenus(){return Array.from(this.megamenuMap.values())}}},366:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageFolderModelFactory=void 0;var r=o(3),s=o(50);t.PageFolderModelFactory=class{static make(e,t){return(0,r.action)((()=>{const o=new s.PageFolderModel(t);return this.remake(o,e)}))()}static remake(e,t){return(0,r.action)((()=>(e._id=t._id,e.slug=t.slug,e.siteId=t.siteId,e.title=t.title,e.createdAt=t.createdAt,e.updatedAt=t.updatedAt,e.updatedBy=t.updatedBy,e.deletedAt=t.deletedAt,e)))()}}},389:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Page=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=b(t);if(o&&o.has(e))return o.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,o&&o.set(e,r),r}(o(0)),s=o(5),n=o(74),i=o(390),a=o(42),d=o(391),c=o(39),l=o(111),u=o(400),m=o(37),p=o(401),v=o(403),f=o(86),y=o(404),g=o(405),h=o(9),M=(o(406),o(7)),C=o(409);function b(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(b=function(e){return e?o:t})(e)}t.Page=(0,s.observer)((()=>{const e=(0,r.useRef)(null),t=(0,r.useContext)(h.SiteContext),o=(0,r.useContext)(M.PageContext),s=(0,r.useContext)(a.SiteViewportContext),b=(0,m.useMegamenuApi)();(()=>{const e=(0,r.useContext)(M.PageContext),t=(0,r.useContext)(c.ConversionContext);(0,r.useEffect)((()=>{var o;(null===(o=e.version.conversion)||void 0===o?void 0:o.trackEvents.length)&&t.trackPage(e.version.conversion)}),[e._id])})(),(0,d.useRedrawHighlights)(t);const _=!1;return r.default.createElement(n.EventListenerContextProvider,null,r.default.createElement("div",{className:"con-kit-page","data-page-id":o._id,ref:e},r.default.createElement(g.UpgradeBannerAsyncComponent,null),r.default.createElement(l.GlobalOrganismListContext.Provider,{value:o.version.globalOrganisms},r.default.createElement(f.SectionsContext.Provider,{value:o.version.sections},r.default.createElement(v.SectionBreakpointsManager,{pageModel:o,sections:o.version.sections,showHiddenSections:s.showHiddenSections,allowSectionCollapse:s.allowSectionCollapse,expandedHiddenSectionIds:s.expandedHiddenSectionIds,viewport:s.viewport}),r.default.createElement(C.PageSectionsList,{sections:o.version.sections}))),r.default.createElement(p.ModalManagerComponent,{pageModel:o,bindTo:e}),!!b.registry.size&&r.default.createElement(u.MegamenuPrerenderComponentAsync,null),r.default.createElement(i.CookieBannerLazyComponent,{siteModel:t}),_,_),r.default.createElement(y.OnepageBarAsyncComponent,null))}))},406:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SiteCustomCodeManager=t.PageCustomCodeManager=void 0;var r=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var o=c(t);if(o&&o.has(e))return o.get(e);var r={__proto__:null},s=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var n in e)if("default"!==n&&{}.hasOwnProperty.call(e,n)){var i=s?Object.getOwnPropertyDescriptor(e,n):null;i&&(i.get||i.set)?Object.defineProperty(r,n,i):r[n]=e[n]}return r.default=e,o&&o.set(e,r),r}(o(0)),s=o(5),n=o(9),i=o(7),a=o(407),d=o(408);function c(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,o=new WeakMap;return(c=function(e){return e?o:t})(e)}t.PageCustomCodeManager=(0,s.observer)((()=>{const e=(0,r.useContext)(i.PageContext);return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.CustomHeadCode,{code:e.version.codeHead||"",source:"page"}),r.default.createElement(a.CustomBodyCode,{source:"page",code:e.version.codeBody||"",styles:e.version.styles||""}))})),t.SiteCustomCodeManager=(0,s.observer)((()=>{const e=(0,r.useContext)(n.SiteContext);return r.default.createElement(r.default.Fragment,null,r.default.createElement(d.CustomHeadCode,{code:e.codeHead||"",source:"site"}),r.default.createElement(a.CustomBodyCode,{source:"site",code:e.codeBody||"",styles:e.styles||""}))}))},407:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CustomBodyCode=void 0;var r=o(0),s=o(5),n=o(32),i=o(58);t.CustomBodyCode=(0,s.observer)((e=>{const t="undefined"!=typeof document?document:null,[o]=(0,r.useState)((()=>{if(!t)return;const o=t.body,r=t.createElement("style");r.setAttribute(n.CustomCodeAttributes.BodyStyles,e.source);const s=t.createElement("div");s.setAttribute(n.CustomCodeAttributes.BodyCode,e.source);const i=t.createElement("div");return i.setAttribute(n.CustomCodeAttributes.BodyScripts,e.source),{container:o,stylesContainer:r,codeContainer:s,codeFragment:i}})),s=(0,r.useCallback)((r=>{if(!t)return;if(!o)return;o.container.appendChild(o.stylesContainer),o.container.appendChild(o.codeContainer),o.container.appendChild(o.codeFragment);const s=(0,i.processCode)(r||"",!1,e.source);try{o.codeContainer.innerHTML=s.innerHTML||""}catch(e){console.error(e)}s.scripts.forEach((e=>{o.codeFragment.appendChild(e)}))}),[t,o,e.source]),a=(0,r.useCallback)((()=>{if(t&&o){o.codeFragment.childNodes.forEach((e=>{o.codeFragment.removeChild(e)}));try{o.codeContainer.innerHTML=""}catch(e){console.error(e)}try{var e;null===(e=o.stylesContainer.parentNode)||void 0===e||e.removeChild(o.stylesContainer)}catch(e){console.error(e)}try{var r;null===(r=o.codeContainer.parentNode)||void 0===r||r.removeChild(o.codeContainer)}catch(e){console.error(e)}try{var s;null===(s=o.codeFragment.parentNode)||void 0===s||s.removeChild(o.codeFragment)}catch(e){console.error(e)}}}),[t,o]),d=(0,r.useCallback)((e=>{t&&o&&(a(),s(e))}),[t,o]),c=(0,r.useCallback)(((e="")=>{t&&o&&"undefined"!=typeof window&&(o.container.contains(o.stylesContainer)||o.container.appendChild(o.stylesContainer),o.stylesContainer.innerHTML=e)}),[t,o]),l=(0,r.useCallback)((()=>{if(t&&o)try{o.container.removeChild(o.stylesContainer)}catch(e){console.error(e)}}),[t,o]);return(0,r.useEffect)((()=>()=>{l(),a()}),[]),(0,r.useEffect)((()=>{d(e.code)}),[e.code]),(0,r.useEffect)((()=>{c(e.styles)}),[e.styles]),null}))},408:function(e,t,o){"use strict";var r=o(1);Object.defineProperty(t,"__esModule",{value:!0}),t.CustomHeadCode=void 0;var s,n=r(o(0)),i=o(5),a=o(32),d=o(58);t.CustomHeadCode=(0,i.observer)(s=class extends n.default.Component{constructor(e){if(super(e),this.container=null,this.doc=null,"undefined"==typeof document)return;const t=document;t&&(this.doc=t,this.container=t.head)}componentDidMount(){if(this.doc&&this.container){const e=this.doc.createDocumentFragment(),t=(0,d.processCode)(this.props.code,!0,this.props.source);t.scripts.forEach((t=>{e.append(t)})),t.HTMLNodes.forEach((t=>{e.append(t)})),this.doc.head.appendChild(e)}}componentWillUnmount(){this.doc&&this.doc.querySelectorAll(`[${a.CustomCodeAttributes.HeadCode}]`).forEach((e=>{e.remove()}))}render(){return null}})||s},409:function(e,t,o){"use strict";var r=o(1);Object.defineProperty(t,"__esModule",{value:!0}),t.PageSectionsList=void 0;var s=r(o(0)),n=o(5),i=o(59);t.PageSectionsList=(0,n.observer)((e=>s.default.createElement(s.default.Fragment,null,e.sections.map((e=>s.default.createElement(i.SectionOrganismComponentLazy,{key:e._id,organismModel:e}))))))},50:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PageFolderModel=void 0;var r=o(3),s=o(366);class n{constructor(e){this.$siteModel=e,this._id=void 0,this.slug=void 0,this.siteId=void 0,this.title=void 0,this.createdAt=void 0,this.updatedAt=void 0,this.updatedBy=void 0,this.deletedAt=void 0,(0,r.makeAutoObservable)(this)}get folderPath(){return{folderId:this._id,siteId:this.$siteModel._id}}}t.PageFolderModel=n,n.make=s.PageFolderModelFactory.make,n.remake=s.PageFolderModelFactory.remake},58:function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.processCode=void 0;var r=o(32);t.processCode=(e,t=!1,o)=>{let s=[];const n=document.implementation.createHTMLDocument();n.body.innerHTML=e,[].map.call(n.querySelectorAll("script"),(e=>{try{const i=document.createElement("script");e.textContent&&(t&&i.setAttribute(r.CustomCodeAttributes.HeadCode,o||""),i.innerHTML=e.textContent),i.dataset.cookieconsent="ignore",[].forEach.call(e.attributes,(e=>{i.setAttribute(e.name,e.value)})),s=[...s,i],n.body.removeChild(e)}catch(e){console.log("e",e)}}));const i=n.body.querySelectorAll("*");return t&&i.forEach((e=>{"dataset"in e&&e.dataset&&e.setAttribute(r.CustomCodeAttributes.HeadCode,o||"")})),{scripts:s,innerHTML:n.body.innerHTML,HTMLNodes:i}}},7:function(e,t,o){"use strict";var r=o(1);Object.defineProperty(t,"__esModule",{value:!0}),t.PageContext=void 0;var s=r(o(0));t.PageContext=s.default.createContext({})}}]);